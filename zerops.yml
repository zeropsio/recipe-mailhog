mailhog:
  build:
    base: [go@1]
    prepare:
      - echo "The application build is being prepared ...."
      - |
        go install github.com/mailhog/MailHog@1.0.1
    build:
      - |
        cd ~/go/bin
        cp MailHog /build/source/MailHog
    deploy: [MailHog]
  run:
    prepare:
      - echo "The application runtime is being prepared ...."
      - |
        adduser --disabled-password --gecos "" --shell /bin/bash recipe
        usermod -aG sudo recipe
    init:
      - echo "The application runtime is being initialized ..."
      - |
        chown recipe:recipe /var/www/MailHog
        chmod 775 /var/www/MailHog
    start: su recipe -c ./MailHog
